# web安全

## XSS

### 反射型XSS

反射型攻击一般是攻击方通过特定的手法，诱使用户去访问一个包含恶意代码的`URL`，然后进入网站执行恶意代码，反射型攻击可以窃取客户端的`cookie`或者钓鱼欺骗

### 存储型XSS

攻击者事先会将恶意脚本上传或者存储到服务器中，只要受害者浏览包含有这个恶意脚本都会被受到攻击，这种攻击是非常可怕的，可能会大量窃取`cookie`，这类的攻击一般出现在评论、留言、直播弹幕等地方

### DOM型XSS

`DOM`型攻击可以直接通过`HTTP`劫持，修改对应的`HTML`文件来实现恶意代码的注入

### 防御

- 将提交的包含有`JS`敏感字符进行转义，严格控制输入的字符串
- 对于不受信任的输入，都应该限定一个合理的长度
- 纯前端渲染，明确`innerText`、`setAttribute`、`style`，将代码与数据分隔开
- 不要一些不可信的数据传递到这些`API`，如 `eval()`、`onclick`、`onerror`、`onload`等
- 将`cookie`设置为`http-only`，`js`脚本将无法读取到`cookie`信息
- 严格的`CSP`，禁止加载外域代码、外域提交、内联脚本执行等较为严格的方式
